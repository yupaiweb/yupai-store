<!DOCTYPE html>
<html lang="km">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>YUPAI STORE GAME TOPUP</title>
    <link href="https://fonts.googleapis.com/css2?family=Kantumruy+Pro:wght@400;600;700&family=Poppins:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    
    <style>
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• ROOT COLORS & THEME â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        :root {
            --bg-main: #0a0a0a;
            --bg-secondary: #141415;
            --bg-card: #1c1c1e;
            --bg-input: #252529;
            --text-primary: #ffffff;
            --text-secondary: #8e8e93;
            --text-sub: #b0b0b5; 
            --accent-green: #32d74b;
            --accent-green-glow: rgba(50, 215, 75, 0.4);
            --accent-red: #ff453a;
            --glass-border: rgba(255, 255, 255, 0.12);
            --glass-border-light: rgba(255, 255, 255, 0.05);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', 'Kantumruy Pro', sans-serif;
            -webkit-tap-highlight-color: transparent;
        }

        html, body {
            background: var(--bg-main);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            max-width: 500px;
            margin: 0 auto;
            width: 100%;
            position: relative;
            scroll-behavior: smooth;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• ANIMATIONS (NEW) â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        @keyframes shine {
            0% { background-position: -200% center; }
            100% { background-position: 200% center; }
        }

        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-6px); }
            100% { transform: translateY(0px); }
        }

        @keyframes popIn {
            0% { opacity: 0; transform: translateY(40px) scale(0.9); }
            100% { opacity: 1; transform: translateY(0) scale(1); }
        }

        @keyframes pulseGlow {
            0% { box-shadow: 0 0 15px rgba(50, 215, 75, 0.15); }
            50% { box-shadow: 0 0 25px rgba(50, 215, 75, 0.4); }
            100% { box-shadow: 0 0 15px rgba(50, 215, 75, 0.15); }
        }

        @keyframes slideUpFade {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• HEADER â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        header {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 16px 18px;
            background: rgba(10, 10, 10, 0.85);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--glass-border-light);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .logo {
            font-size: 1.3rem;
            font-weight: 900;
            letter-spacing: 1px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .logo .store-name {
            color: #ffffff;
        }
        .logo .game-topup {
            background: linear-gradient(135deg, var(--accent-green), #ffffff, var(--accent-green));
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-size: 0.85em;
            animation: shine 4s linear infinite; /* Added Shine Animation */
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• CONTAINER â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .container {
            padding: 15px;
            padding-bottom: 100px; 
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• HOME VIEW â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .game-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 14px;
        }

        /* Smooth Card Animations */
        .game-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.02));
            border: 1px solid rgba(50, 215, 75, 0.3);
            border-radius: 20px;
            padding: 12px;
            text-align: center;
            display: flex;
            flex-direction: column;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            animation: popIn 0.6s cubic-bezier(0.16, 1, 0.3, 1) backwards; /* Pop-in Animation */
        }
        
        /* Staggered Delay for Cards */
        .game-card:nth-child(1) { animation-delay: 0.1s; }
        .game-card:nth-child(2) { animation-delay: 0.2s; }
        .game-card:nth-child(3) { animation-delay: 0.3s; }
        .game-card:nth-child(4) { animation-delay: 0.4s; }

        .game-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 30px rgba(50, 215, 75, 0.2);
            border-color: var(--accent-green);
        }
        .game-card:active { 
            transform: scale(0.92); 
        }

        .game-icon-box {
            width: 100%;
            aspect-ratio: 1/1;
            border-radius: 16px; 
            margin-bottom: 12px;
            overflow: hidden; 
        }
        .game-icon-box img { 
            width: 100%; 
            height: 100%; 
            object-fit: cover; 
            animation: float 4s ease-in-out infinite; /* Floating Animation */
        }

        /* Staggered float to make them look organic */
        .game-card:nth-child(even) .game-icon-box img { animation-delay: -2s; }

        .game-title {
            font-size: 0.75rem; 
            font-weight: 800;
            margin-bottom: 10px;
            white-space: nowrap; 
            overflow: hidden;
            text-overflow: ellipsis; 
        }

        .topup-btn {
            width: 100%;
            padding: 10px 0;
            border: none;
            border-radius: 10px;
            background: var(--accent-green);
            color: #000;
            font-weight: 900;
            font-size: 0.85rem;
            margin-top: auto;
            transition: all 0.3s ease;
        }
        .game-card:hover .topup-btn {
            box-shadow: 0 0 15px rgba(50, 215, 75, 0.5);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• TOPUP VIEW â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .view-section {
            animation: slideUpFade 0.5s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .back-btn {
            background: rgba(255, 255, 255, 0.05);
            color: #fff;
            border: 1px solid var(--glass-border);
            padding: 8px 16px;
            border-radius: 20px;
            margin-bottom: 15px;
            font-size: 0.85rem;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        .back-btn:hover { background: rgba(255, 255, 255, 0.1); transform: translateX(-5px); }
        .back-btn:active { transform: scale(0.95) translateX(-5px); }

        .game-detail-header {
            display: flex;
            align-items: center;
            gap: 15px;
            background: var(--bg-card);
            padding: 15px;
            border-radius: 20px;
            border: 1px solid var(--glass-border-light);
            margin-bottom: 15px;
            transition: transform 0.3s ease;
        }
        .game-detail-header:hover { transform: scale(1.02); }
        .game-detail-header img { 
            width: 60px; height: 60px; border-radius: 14px; object-fit: cover;
            animation: float 3s ease-in-out infinite; 
        }
        .game-detail-header h2 { font-size: 1rem; color: var(--accent-green); margin-bottom: 4px; }
        .game-detail-header p { font-size: 0.7rem; color: var(--text-secondary); line-height: 1.4; }

        .box-section {
            background: var(--bg-card);
            padding: 18px 15px;
            border-radius: 20px;
            border: 1px solid var(--glass-border-light);
            margin-bottom: 15px;
        }
        .box-section h3 {
            font-size: 0.95rem;
            margin-bottom: 15px;
            color: #fff;
            font-weight: 700;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        .input-group input {
            width: 100%;
            padding: 14px;
            border-radius: 14px;
            background: var(--bg-input);
            border: 1px solid transparent;
            color: white;
            font-size: 0.9rem;
            text-align: center;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        .input-group input:focus { 
            outline: none; 
            border-color: var(--accent-green); 
            background: #1a1a1c; 
            box-shadow: 0 0 15px rgba(50, 215, 75, 0.2); 
            transform: translateY(-2px);
        }

        .package-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        /* Smooth Package Card */
        .package-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.05), transparent);
            border: 1px solid var(--glass-border-light);
            border-radius: 16px;
            padding: 12px 10px;
            display: flex;
            align-items: center;
            position: relative;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            overflow: hidden;
            min-height: 80px;
            animation: popIn 0.4s cubic-bezier(0.16, 1, 0.3, 1) backwards;
        }
        .package-card:hover { background: rgba(255, 255, 255, 0.08); transform: translateY(-3px); }
        .package-card:active { transform: scale(0.95); }
        
        .package-card.selected {
            border-color: var(--accent-green);
            background: rgba(50, 215, 75, 0.15);
            transform: translateY(-4px) scale(1.02);
            animation: pulseGlow 2s infinite; /* Pulsing Animation for selected */
        }

        .pkg-img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            overflow: hidden;
            transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .package-card:hover .pkg-img { transform: scale(1.1) rotate(5deg); }
        .package-card.selected .pkg-img { transform: scale(1.15) rotate(10deg); }
        
        .pkg-img img { width: 100%; height: 100%; object-fit: contain; padding: 5px; }

        .pkg-info { display: flex; flex-direction: column; align-items: flex-end; text-align: right; width: 100%; overflow: hidden; }
        .pkg-subtext { font-size: 0.6rem; color: var(--text-sub); margin-bottom: 2px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; width: 100%; }
        .pkg-price { font-size: 1rem; font-weight: 800; color: var(--accent-green); margin-bottom: 2px; transition: color 0.3s; }
        .package-card.selected .pkg-price { text-shadow: 0 0 10px rgba(50, 215, 75, 0.5); }
        .pkg-desc { font-size: 0.65rem; color: var(--text-secondary); font-weight: 600; }
        .pkg-badge { position: absolute; top: 4px; right: 8px; font-size: 0.55rem; color: var(--accent-red); font-style: italic; font-weight: 800; animation: float 2s infinite alternate; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• STICKY BOTTOM BAR â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .checkout-bar {
            position: fixed;
            bottom: -100px;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 500px;
            background: rgba(20, 20, 21, 0.95);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            border-top: 1px solid var(--accent-green);
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
            border-radius: 25px 25px 0 0;
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 -5px 30px rgba(50, 215, 75, 0.2);
        }
        .checkout-bar.show { bottom: 0; }

        .checkout-details { display: flex; flex-direction: column; }
        .checkout-name { color: #fff; font-size: 0.8rem; font-weight: 600; }
        .checkout-price { 
            color: var(--accent-green); font-size: 1.3rem; font-weight: 900; letter-spacing: 0.5px;
            transition: transform 0.3s ease;
        }
        .checkout-bar.pop .checkout-price { transform: scale(1.1); }

        .buy-btn {
            background: var(--accent-green);
            color: #000;
            border: none;
            padding: 12px 35px;
            border-radius: 14px;
            font-weight: 900;
            font-size: 0.95rem;
            cursor: pointer;
            text-transform: uppercase;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
        }
        .buy-btn:hover { transform: translateY(-3px); box-shadow: 0 5px 20px rgba(50, 215, 75, 0.4); }
        .buy-btn:active { transform: scale(0.9); }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• TOAST ERROR & INFO â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .error-toast, .info-toast {
            position: fixed;
            top: -100px;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            padding: 12px 24px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.85rem;
            z-index: 10001;
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            white-space: nowrap;
        }

        .error-toast { background: rgba(255, 69, 58, 0.95); box-shadow: 0 10px 30px rgba(255, 69, 58, 0.3); }
        .info-toast { background: rgba(50, 215, 75, 0.95); color: black; box-shadow: 0 10px 30px rgba(50, 215, 75, 0.3); }

        .error-toast.show, .info-toast.show { top: 50px; }
    </style>
</head>
<body>

    <audio id="clickSound" src="Sound_thoch.mp3" preload="auto"></audio>

    <div class="error-toast" id="errorToast">áŸá¼á˜á”á‰áŸ’á…á¼á›á–áŸááŸŒá˜á¶á“á±áŸ’á™á”á¶á“ááŸ’ášá¹á˜ááŸ’ášá¼áœ!</div>
    <div class="info-toast" id="infoToast">cooming soon á˜á€áŠá›áŸ‹á†á¶á”áŸ‹áŸ—</div>

    <header>
        <div class="logo">
            <span class="store-name">YUPAI STORE</span> 
            <span class="game-topup">GAME TOPUP</span>
        </div>
    </header>

    <div class="container">

        <div id="homeView" class="view-section">
            <div class="game-grid">
                <div class="game-card" onclick="openTopup('MLBB')">
                    <div class="game-icon-box"><img src="MLBB.png" alt="MLBB"></div>
                    <div class="game-title">MOBILE LEGENDS</div>
                    <button class="topup-btn">TOPUP</button>
                </div>
                
                <div class="game-card" onclick="openTopup('FF')">
                    <div class="game-icon-box"><img src="FF.png" alt="FF"></div>
                    <div class="game-title">FREE FIRE</div>
                    <button class="topup-btn">TOPUP</button>
                </div>
                
                <div class="game-card" onclick="showInfo('cooming soon á˜á€áŠá›áŸ‹á†á¶á”áŸ‹áŸ—')">
                    <div class="game-icon-box"><img src="HOK.png" alt="HOK"></div>
                    <div class="game-title">HONOR OF KINGS</div>
                    <button class="topup-btn">TOPUP</button>
                </div>
                
                <div class="game-card" onclick="showInfo('cooming soon á˜á€áŠá›áŸ‹á†á¶á”áŸ‹áŸ—')">
                    <div class="game-icon-box"><img src="MCGG.png" alt="MCGG"></div>
                    <div class="game-title">MAGIC CHESS: GO GO</div>
                    <button class="topup-btn">TOPUP</button>
                </div>
            </div>
        </div>

        <div id="topupView" class="view-section" style="display: none;">
            <button class="back-btn" onclick="goHome()">
                <span>â¬…</span> ááŸ’ášá¡á”áŸ‹á€áŸ’ášáŸ„á™
            </button>

            <div class="game-detail-header" id="gameDetailHeader"></div>

            <div class="box-section">
                <h3>á”á‰áŸ’á…á¼á› User ID</h3>
                <div class="input-group" id="inputContainer"></div>
            </div>

            <div class="box-section">
                <h3>á‡áŸ’ášá¾áŸášá¾áŸá€á‰áŸ’á…á”áŸ‹</h3>
                <div class="package-grid" id="packageContainer"></div>
            </div>
        </div>

    </div>

    <div class="checkout-bar" id="checkoutBar">
        <div class="checkout-details">
            <span class="checkout-name" id="selectedName">á”á¶á“á‡áŸ’ášá¾áŸášá¾áŸ: 0 á€á‰áŸ’á…á”áŸ‹</span>
            <span class="checkout-price" id="selectedPrice">0.00$</span>
        </div>
        <button class="buy-btn" onclick="processCheckout()">Buy</button>
    </div>

    <script>
        const clickSound = document.getElementById('clickSound');
        const homeView = document.getElementById('homeView');
        const topupView = document.getElementById('topupView');
        const checkoutBar = document.getElementById('checkoutBar');
        
        const selectedNameText = document.getElementById('selectedName');
        const selectedPriceText = document.getElementById('selectedPrice');
        const gameDetailHeader = document.getElementById('gameDetailHeader');
        const inputContainer = document.getElementById('inputContainer');
        const packageContainer = document.getElementById('packageContainer');
        
        let selectedPackages = [];
        let currentGame = '';

        // MLBB Packages
        const mlbbPackages = [
            { img: 'WeeklyPass.png', name: 'WeeklyPass X1', price: '$1.59' },
            { img: 'WeeklyPass.png', name: 'WeeklyPass x2', price: '$3.15' },
            { img: 'WeeklyPass.png', name: 'WeeklyPass X3', price: '$4.65' },
            { img: 'Diamond.png', name: '50+50 Diamonds', price: '$1.00', badge: 'á–áŸá‡áŸ’áš X2' },
            { img: 'Diamond.png', name: '150+150 Diamonds', price: '$2.55', badge: 'á–áŸá‡áŸ’áš X2' },
            { img: 'Diamond.png', name: '250+250 Diamonds', price: '$3.95', badge: 'á–áŸá‡áŸ’áš X2' },
            { img: 'Diamond.png', name: '500+500 Diamonds', price: '$7.77', badge: 'á–áŸá‡áŸ’áš X2' },
            { img: 'Diamond.png', name: '22 Diamonds', price: '$0.55' },
            { img: 'Diamond.png', name: '55 Diamonds', price: '$0.89' },
            { img: 'Diamond.png', name: '86 Diamonds', price: '$1.35' },
            { img: 'Diamond.png', name: '110 Diamonds', price: '$1.89' },
            { img: 'Diamond.png', name: '165 Diamonds', price: '$2.55' },
            { img: 'Diamond.png', name: '257 Diamonds', price: '$3.65' },
            { img: 'Diamond.png', name: '343 Diamonds', price: '$4.89' },
            { img: 'Diamond.png', name: '429 Diamonds', price: '$6.00' },
            { img: 'Diamond.png', name: '514 Diamonds', price: '$7.15' },
            { img: 'Diamond.png', name: '565 Diamonds', price: '$7.65' },
            { img: 'Diamond.png', name: '600 Diamonds', price: '$8.55' },
            { img: 'Diamond.png', name: '706 Diamonds', price: '$9.85' },
            { img: 'Diamond.png', name: '878 Diamonds', price: '$11.85' },
            { img: 'Diamond.png', name: '963 Diamonds', price: '$13.45' },
            { img: 'Diamond.png', name: '1049 Diamonds', price: '$14.75' },
            { img: 'Diamond.png', name: '1135 Diamonds', price: '$15.85' },
            { img: 'Diamond.png', name: '1220 Diamonds', price: '$16.85' },
            { img: 'Diamond.png', name: '1412 Diamonds', price: '$19.05' },
            { img: 'Diamond.png', name: '1584 Diamonds', price: '$21.85' },
            { img: 'Diamond.png', name: '1755 Diamonds', price: '$23.85' },
            { img: 'Diamond.png', name: '2195 Diamonds', price: '$29.45' }
        ];

        // Free Fire Packages
        const ffPackages = [
            { img: 'WeeklyLite.png', name: 'WeeklyğŸ’Lite', price: '$0.79', subtext: 'á”á¶á“20ğŸ’á—áŸ’á›á¶á˜áŸ—' },
            { img: 'WeeklyLite.png', name: 'Weekly ğŸ’Lite X3', price: '$2.25', subtext: 'á”á¶á“60ğŸ’á—áŸ’á›á¶á˜áŸ—' },
            { img: 'WeeklyLite.png', name: 'WeeklyğŸ’Lite X5', price: '$3.60', subtext: 'á”á¶á“100ğŸ’á—áŸ’á›á¶á˜áŸ—' },
            { img: 'WeeklyLite.png', name: 'WeeklyğŸ’ Lite X10', price: '$7.05', subtext: 'á”á¶á“200ğŸ’á—áŸ’á›á¶á˜áŸ—' },
            { img: 'Weekly.png', name: 'WeeklyğŸ’ X1', price: '$1.85', subtext: 'á”á¶á“200ğŸ’á—áŸ’á›á¶á˜áŸ—' },
            { img: 'Weekly.png', name: 'WeeklyğŸ’ X2', price: '$3.55', subtext: 'á”á¶á“400ğŸ’á—áŸ’á›á¶á˜áŸ—' },
            { img: 'Weekly.png', name: 'WeeklyğŸ’ X3', price: '$5.25', subtext: 'á”á¶á“600ğŸ’á—áŸ’á›á¶á˜áŸ—' },
            { img: 'Weekly.png', name: 'WeeklyğŸ’ X5', price: '$8.60', subtext: 'á”á¶á“1000ğŸ’á—áŸ’á›á¶á˜áŸ—' },
            { img: 'Weekly.png', name: 'WeeklyğŸ’X10', price: '$17.05', subtext: 'á”á¶á“2000ğŸ’á—áŸ’á›á¶á˜áŸ—' },
            { img: 'Monthly.png', name: 'MonthlyğŸ’X1', price: '$7.90', subtext: 'á”á¶á“1000ğŸ’á—áŸ’á›á¶á˜áŸ—' },
            { img: 'Monthly.png', name: 'MonthlyğŸ’X2', price: '$15.65', subtext: 'á”á¶á“2000ğŸ’á—áŸ’á›á¶á˜áŸ—' },
            { img: 'Monthly.png', name: 'MonthlyğŸ’X3', price: '$23.85', subtext: 'á”á¶á“3000ğŸ’á—áŸ’á›á¶á˜áŸ—' },
            { img: 'Monthly.png', name: 'MonthlyğŸ’X5', price: '$38.90', subtext: 'á”á¶á“5000ğŸ’á—áŸ’á›á¶á˜áŸ—' },
            { img: 'Monthly.png', name: 'MonthlyğŸ’X10', price: '$77.65', subtext: 'á”á¶á“10000ğŸ’á—áŸ’á›á¶á˜áŸ—' },
            { img: 'Monthly.png', name: 'Weekly+MonthlyğŸ’', price: '$9.60', subtext: 'á”á¶á“1200ğŸ’á—áŸ’á›á¶á˜áŸ—' },
            { img: 'Monthly.png', name: '3 in 1 Monthly ğŸ’', price: '$10.30', subtext: 'á”á¶á“1220ğŸ’á—áŸ’á›á¶á˜áŸ—' },
            { img: 'Monthly.png', name: '25ğŸ’ Diamonds', price: '$0.38' },
            { img: 'Monthly.png', name: '50ğŸ’ Diamonds', price: '$0.66' },
            { img: 'Monthly.png', name: '100ğŸ’ Diamonds', price: '$1.12' },
            { img: 'Monthly.png', name: '310ğŸ’ Diamonds', price: '$3.00' },
            { img: 'Monthly.png', name: '520ğŸ’ Diamonds', price: '$4.85' },
            { img: 'Monthly.png', name: '1060ğŸ’ Diamonds', price: '$9.15' },
            { img: 'Monthly.png', name: '2180ğŸ’ Diamonds', price: '$17.75' },
            { img: 'Monthly.png', name: '5600ğŸ’ Diamonds', price: '$44.15' },
            { img: 'Monthly.png', name: '11500ğŸ’ Diamonds', price: '$87.15' },
            { img: 'Monthly.png', name: 'Evo Access 3 Day', price: '$0.75', subtext: 'Skin á€á¶áŸ†á—áŸ’á›á¾á„ 3ááŸ’á„áŸƒ' },
            { img: 'Monthly.png', name: 'Evo Access 7 Day', price: '$1.05', subtext: 'Skin á€á¶áŸ†á—áŸ’á›á¾á„ 7ááŸ’á„áŸƒ' },
            { img: 'Monthly.png', name: 'Evo Access 30 Day', price: '$2.65', subtext: 'Skin á€á¶áŸ†á—áŸ’á›á¾á„ 30ááŸ’á„áŸƒ' }
        ];

        function playCustomSound() {
            clickSound.currentTime = 0; 
            clickSound.play().catch(e => console.log("Audio Error:", e));
        }

        function showError(msg) {
            playCustomSound();
            const toast = document.getElementById('errorToast');
            toast.textContent = msg;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }
        
        function showInfo(msg) {
            playCustomSound();
            const toast = document.getElementById('infoToast');
            toast.textContent = msg;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }

        function openTopup(game) {
            playCustomSound();
            currentGame = game;
            
            selectedPackages = [];
            packageContainer.innerHTML = '';
            inputContainer.innerHTML = '';
            checkoutBar.classList.remove('show');

            if (game === 'MLBB') {
                gameDetailHeader.innerHTML = `
                    <img src="MLBB.png" alt="MLBB">
                    <div>
                        <h2>á”á‰áŸ’á…á¼á›á–áŸá‡áŸ’áš Mobile Legends</h2>
                        <p>á–áŸá‡áŸ’ášá‘á‘á½á›áŸáŸ’á‚á¶á›áŸ‹á–á¸á€áŸ’ášá»á˜á áŸŠá»á“<br>áŸá»áœááŸ’áá·á—á¶á–áŠá›áŸ‹ Account </p>
                    </div>
                `;
                inputContainer.innerHTML = `
                    <input type="text" id="userIdInput" placeholder="User ID">
                    <input type="text" id="serverIdInput" placeholder="Server ID">
                `;
                renderPackages(mlbbPackages);
            } 
            else if (game === 'FF') {
                gameDetailHeader.innerHTML = `
                    <img src="FF.png" alt="FF">
                    <div>
                        <h2>á”á‰áŸ’á…á¼á›á–áŸá‡áŸ’áš Free Fire</h2>
                        <p>á–áŸá‡áŸ’ášá‘á‘á½á›áŸáŸ’á‚á¶á›áŸ‹á–á¸á€áŸ’ášá»á˜á áŸŠá»á“<br>áŸá»áœááŸ’áá·á—á¶á–áŠá›áŸ‹ Account </p>
                    </div>
                `;
                inputContainer.innerHTML = `
                    <input type="text" id="userIdInput" placeholder="User ID">
                `;
                renderPackages(ffPackages);
            }

            homeView.style.display = 'none';
            topupView.style.display = 'block';
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function renderPackages(packages) {
            packages.forEach((pkg, index) => {
                let badgeHtml = pkg.badge ? `<div class="pkg-badge">${pkg.badge}</div>` : '';
                let subtextHtml = pkg.subtext ? `<div class="pkg-subtext">${pkg.subtext}</div>` : '';
                
                // Add staggered animation delay to package cards
                let delay = index * 0.05;
                
                let cardHtml = `
                    <div class="package-card" style="animation-delay: ${delay}s" onclick="selectPackage(this, '${pkg.name}', '${pkg.price}')">
                        <div class="pkg-img"><img src="${pkg.img}"></div>
                        <div class="pkg-info">
                            ${badgeHtml}
                            ${subtextHtml}
                            <div class="pkg-price">${pkg.price}</div>
                            <div class="pkg-desc">${pkg.name}</div>
                        </div>
                    </div>
                `;
                packageContainer.innerHTML += cardHtml;
            });
        }

        function goHome() {
            playCustomSound();
            topupView.style.display = 'none';
            homeView.style.display = 'block';
            checkoutBar.classList.remove('show');
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function selectPackage(element, name, priceStr) {
            playCustomSound();
            const price = parseFloat(priceStr.replace('$', ''));

            if (element.classList.contains('selected')) {
                element.classList.remove('selected');
                selectedPackages = selectedPackages.filter(p => p.name !== name);
            } else {
                element.classList.add('selected');
                selectedPackages.push({ name: name, price: price, priceStr: priceStr });
            }

            updateCheckoutBar();
        }

        function updateCheckoutBar() {
            if (selectedPackages.length > 0) {
                let total = 0;
                selectedPackages.forEach(p => total += p.price);
                
                selectedNameText.textContent = `á”á¶á“á‡áŸ’ášá¾áŸášá¾áŸ: ${selectedPackages.length} á€á‰áŸ’á…á”áŸ‹`;
                selectedPriceText.textContent = `$${total.toFixed(2)}`;
                
                // Add pop effect to price
                checkoutBar.classList.remove('pop');
                void checkoutBar.offsetWidth; // trigger reflow
                checkoutBar.classList.add('pop');
                
                checkoutBar.classList.add('show');
            } else {
                checkoutBar.classList.remove('show');
            }
        }

        function processCheckout() {
            playCustomSound();
            
            const userId = document.getElementById('userIdInput') ? document.getElementById('userIdInput').value.trim() : '';
            const serverIdInput = document.getElementById('serverIdInput');
            const serverId = serverIdInput ? serverIdInput.value.trim() : '';
            
            if (!userId) {
                showError("áŸá¼á˜á”á‰áŸ’á…á¼á› User ID á‡á¶á˜á»á“áŸá·á“!");
                return;
            }
            if (currentGame === 'MLBB' && !serverId) {
                showError("áŸá¼á˜á”á‰áŸ’á…á¼á› Server ID á‡á¶á˜á»á“áŸá·á“!");
                return;
            }
            if (selectedPackages.length === 0) {
                showError("áŸá¼á˜á‡áŸ’ášá¾áŸášá¾áŸá€á‰áŸ’á…á”áŸ‹á–áŸá‡áŸ’áš!");
                return;
            }

            let total = 0;
            let packageListText = '';
            
            selectedPackages.forEach(p => {
                packageListText += `${p.name}  ${p.priceStr}\n`;
                total += p.price;
            });

            let message = '';
            if (currentGame === 'MLBB') {
                message = `Game Mobile legends\ná€á‰áŸ’á…á”áŸ‹á–áŸá‡áŸ’á™\n${packageListText}Account\nUser ID ${userId}\nServer ID ${serverId}\náá˜áŸ’á›áŸƒáŸášá»á” $${total.toFixed(2)}`;
            } else if (currentGame === 'FF') {
                message = `Game Free Fire\ná€á‰áŸ’á…á”áŸ‹á–áŸá‡áŸ’á™\n${packageListText}Account\nUser ID ${userId}\náá˜áŸ’á›áŸƒáŸášá»á” $${total.toFixed(2)}`;
            }

            const telegramUrl = `https://t.me/Yupai_official?text=${encodeURIComponent(message)}`;
            window.open(telegramUrl, '_blank');
        }
    </script>

</body>
</html>
